{"ast":null,"code":"/* eslint-disable no-array-constructor */\nimport { Scene, PerspectiveCamera, Mesh, MeshBasicMaterial, PCFSoftShadowMap, Color, SphereGeometry, ConeGeometry, WebGLRenderer, AmbientLight, PointLight, Fog, Group, TextureLoader, PlaneGeometry } from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport GUI from 'lil-gui';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';\nimport { AfterimagePass } from 'three/examples/jsm/postprocessing/AfterimagePass.js';\nimport { ImprovedNoise } from 'three/examples/jsm/math/ImprovedNoise.js';\nimport colors from './colors.js';\n\nclass WebGLApp {\n  constructor(parent) {\n    this.resize = (width, height) => {\n      this.camera.aspect = width / height;\n      this.camera.updateProjectionMatrix();\n      this.renderer.setSize(width, height);\n      this.composer.setSize(width, height);\n    };\n\n    this.addLights = () => {\n      this.createAmbientLight();\n      this.createPointLight();\n    };\n\n    this.createAmbientLight = () => {\n      this.ambientLight = new AmbientLight(0x999999, 1);\n      this.scene.add(this.ambientLight);\n    };\n\n    this.createPointLight = () => {\n      this.light = new PointLight(0xffffff, 0.3, 0);\n      this.light.castShadow = true;\n      this.light.shadow.mapSize.width = 5000;\n      this.light.shadow.mapSize.height = 5000;\n      this.light.position.set(0, 20, -5);\n      this.scene.add(this.light);\n      const light = new PointLight(0xffffff, 0.2, 0);\n      light.castShadow = false;\n      light.position.set(0, 30, 50);\n      this.scene.add(light);\n    };\n\n    this.animate = () => {\n      if (this.particleArr != null && this.ready) {\n        for (var i = 0; i < this.particleArr.length; i++) {\n          this.moveParticle(i);\n        }\n      }\n\n      this.composer.render();\n      requestAnimationFrame(this.animate);\n      this.controls.update();\n    };\n\n    this.moveParticle = i => {\n      var x = Math.ceil(this.particleArr[i].p.x / this.res) - 1;\n      var y = Math.ceil(this.particleArr[i].p.y / this.res) - 1;\n      var value = this.array_of_dir[x][y];\n      this.particleArr[i].p.vx += Math.cos(value) * -0.01;\n      this.particleArr[i].p.vy += Math.sin(value) * 0.01;\n      this.particleArr[i].p.x += this.particleArr[i].p.vx;\n      this.particleArr[i].p.y += this.particleArr[i].p.vy; // apply some friction so point doesn't speed up too much\n\n      this.particleArr[i].p.vx *= 0.99;\n      this.particleArr[i].p.vy *= 0.99; // wrap around edges of screen - boundaries\n\n      if (this.particleArr[i].p.x > this.width) this.particleArr[i].p.x = 1;\n      if (this.particleArr[i].p.y > this.height) this.particleArr[i].p.y = 1;\n      if (this.particleArr[i].p.x < 0) this.particleArr[i].p.x = this.width;\n      if (this.particleArr[i].p.y < 0) this.particleArr[i].p.y = this.height;\n      this.particleArr[i].sphere.position.set(this.particleArr[i].p.x - this.width / 2, this.particleArr[i].p.y - this.height / 2);\n    };\n\n    this.makeScene = () => {\n      this.fieldSetup();\n    };\n\n    this.fieldSetup = () => {\n      //field setup\n      this.res = 25; // resolution\n\n      this.width = 450; // flowfield width and height\n\n      this.height = 450;\n      this.num_p = 25; // number of particles\n      //make an array of particles with position and velocity\n\n      this.particleArr = new Array();\n\n      for (var i = 0; i < this.num_p; i++) {\n        var p = {\n          x: Math.random() * this.width,\n          y: Math.random() * this.height,\n          vx: 0,\n          vy: 0\n        };\n        var color = this.getRandomColor();\n        var sphere = new Mesh(new SphereGeometry(5, 5, 32), new MeshBasicMaterial({\n          color: color\n        }));\n        sphere.position.set(p.x, p.y);\n        this.scene.add(sphere);\n        var particle = {\n          p: p,\n          sphere: sphere\n        };\n        this.particleArr[i] = particle;\n      } //making array to store field values\n\n\n      this.array_of_boxes = new Array(); // helper code to visualize field\n\n      this.array_of_dir = new Array(); // array with all the vectors of the field\n      //TO DO: data from perlin\n      // understanding the data\n      // get the debug working\n      // to the image\n\n      this.drawImage(\"heart2.jpeg\");\n    };\n\n    this.drawImage = filename => {\n      const loader = new TextureLoader();\n      loader.load(\"/assets/textures/\" + filename, texture => {\n        // read texture data\n        // const canvas = document.createElement( 'canvas' );\n        // canvas.width = this.width;\n        // canvas.height = this.height;\n        // this.context = canvas.getContext( '2d' );\n        // console.log(texture.image)\n        // this.context.drawImage( texture.image, 0, 0 );\n        // const data = this.context.getImageData(368, 368, canvas.width, canvas.height);\n        // console.log( data.data[0] );\n        // visualize the texture\n        const geometry = new PlaneGeometry(this.width, this.width);\n        const material = new MeshBasicMaterial({\n          map: texture\n        });\n        const mesh = new Mesh(geometry, material);\n        mesh.position.set(0, 0, 10);\n        mesh.rotation.set(Math.PI, 0, Math.PI);\n        this.scene.add(mesh);\n      }, // onProgress callback currently not supported\n      undefined, // onError callback\n      function (err) {\n        console.error('An error happened.');\n      }); // read texture data\n\n      const myImg = new Image();\n      myImg.crossOrigin = \"Anonymous\";\n\n      myImg.onload = () => {\n        const canvas = document.createElement('canvas');\n        canvas.width = this.width;\n        canvas.height = this.height;\n        const context = canvas.getContext('2d');\n        context.drawImage(myImg, 0, 0); // const data = context.getImageData(368, 368, this.width, this.height);\n        // console.log(data.data)\n\n        this.pixelData(context);\n      };\n\n      myImg.src = \"assets/textures/\" + filename;\n    };\n\n    this.pixelData = imgData => {\n      // for (var i = 0; i < imgData.data.length; i += 4) {\n      //     imgData.data[i] = 255-imgData.data[i]; // red\n      //     // imgData.data[i + 1] = 255-imgData.data[i + 1]; //blue\n      //     // imgData.data[i + 2] = 255-imgData.data[i + 2]; //green\n      //     // imgData.data[i + 3] = 255; // alpha\n      //   }\n      this.context = imgData;\n      const data = this.context.getImageData(368, 368, this.width, this.height);\n      console.log(data.data[0]);\n      var value; // for field\n\n      for (var x = 0; x < this.width; x += this.res) {\n        //console.log(x/res)\n        this.array_of_dir[x / this.res] = new Array();\n        this.array_of_boxes[x / this.res] = new Array();\n\n        for (var y = 0; y < this.height; y += this.res) {\n          //value = this.perlin.noise( x * 0.65, y * 65, 0.65);\n          console.log(\"field\" + this.context.getImageData(x, y, this.width, this.height).data[0]);\n\n          if (this.context.getImageData(x, y, this.width, this.height).data[0] > 0) {\n            value = 1;\n          } else {\n            value = 0;\n          } //this.array_of_dir[x/this.res][y/this.res] = value * this.params.noise_value\n\n\n          this.array_of_dir[x / this.res][y / this.res] = value;\n        }\n      }\n\n      this.makeField();\n    };\n\n    this.makeField = () => {\n      let angle = 0;\n      this.field_lines = new Group();\n\n      for (var x = 0; x < this.width; x += this.res) {\n        for (var y = 0; y < this.height; y += this.res) {\n          angle = this.array_of_dir[x / this.res][y / this.res]; //console.log(\"show field \", angle)\n\n          const geometry = new ConeGeometry(1, 25, 1);\n          const cone = new Mesh(geometry, new MeshBasicMaterial({\n            color: 0xffffff,\n            wireframe: true\n          })); //white color\n\n          cone.position.set(x - this.width / 2 + this.res / 2, y - this.height / 2 + this.res / 2, -5);\n          cone.rotateZ(angle);\n          this.field_lines.add(cone);\n        }\n      } //field lines needs to be rotated horizontally to go from ' | ' to ' __ '\n      // this.field_lines.rotateZ (Math.PI/2)\n\n\n      this.showField();\n      this.ready = true;\n    };\n\n    this.showField = () => {\n      if (this.params.field) this.scene.add(this.field_lines);else this.scene.remove(this.field_lines);\n    };\n\n    this.createGUI = () => {\n      const gui = new GUI();\n      gui.add(this.afterimagePass.uniforms['damp'], 'value', 0, 1).step(0.001).name('PostProcessing Damp');\n      gui.add(this.params, \"field\").onChange(this.showField).name('Show field'); // gui\n      //     .add(this.params, \"noise_value\" , 'value', 0, 5)\n      //     .step( 0.1 )\n      //     .name('Noise value')\n    };\n\n    //the main function\n    this.ready = false; // --- V A R S ----\n\n    this.params = {\n      color: 0xff0000,\n      backgroundColor: 0xe2f0f9,\n      field: true,\n      noise_value: 2\n    };\n    this.colorsArray = colors();\n    this.switch_field = false;\n    this.perlin = new ImprovedNoise(); // ---- BASIC SCENE SETUP----\n\n    const aspect = window.innerWidth / window.innerHeight; // const clock = new Clock()\n    //scene\n\n    this.scene = new Scene(); //this.scene.background = new Color(this.params.backgroundColor);\n    //add fog for trail fade\n\n    this.scene.fog = new Fog(0x000000, 1, 1000); // fog end\n    //camera setup\n\n    this.camera = new PerspectiveCamera(75, aspect, 0.1, 1000);\n    this.camera.position.z = -300;\n    this.scene.add(this.camera); //renderer set up\n\n    this.renderer = new WebGLRenderer({\n      antialias: true\n    });\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\n    this.renderer.shadowMap.enabled = true;\n    this.renderer.shadowMap.type = PCFSoftShadowMap;\n    parent.appendChild(this.renderer.domElement); // postprocessing\n\n    this.composer = new EffectComposer(this.renderer);\n    this.composer.addPass(new RenderPass(this.scene, this.camera));\n    this.afterimagePass = new AfterimagePass();\n    this.composer.addPass(this.afterimagePass); // controls set up\n\n    this.controls = new OrbitControls(this.camera, this.renderer.domElement); //for cursor interaction\n    // this.cursor = {\n    //         x: 0,\n    //         y: 0\n    // }\n    //call init function here\n\n    this.addLights();\n    this.makeScene();\n    this.animate();\n    this.createGUI();\n  }\n\n  getRandomColor() {\n    //random color\n    var color = new Color();\n    color.setHex(`0x${this.colorsArray[Math.floor(Math.random() * this.colorsArray.length)]}`);\n\n    if (color < 500) {\n      color.setHex(500);\n    }\n\n    return color;\n  }\n\n}\n\nexport default WebGLApp;","map":{"version":3,"sources":["/Users/amnaazhar/Desktop/threejs-journey/chapters/chapter2-flowfields/src/webglapp.js"],"names":["Scene","PerspectiveCamera","Mesh","MeshBasicMaterial","PCFSoftShadowMap","Color","SphereGeometry","ConeGeometry","WebGLRenderer","AmbientLight","PointLight","Fog","Group","TextureLoader","PlaneGeometry","OrbitControls","GUI","EffectComposer","RenderPass","AfterimagePass","ImprovedNoise","colors","WebGLApp","constructor","parent","resize","width","height","camera","aspect","updateProjectionMatrix","renderer","setSize","composer","addLights","createAmbientLight","createPointLight","ambientLight","scene","add","light","castShadow","shadow","mapSize","position","set","animate","particleArr","ready","i","length","moveParticle","render","requestAnimationFrame","controls","update","x","Math","ceil","p","res","y","value","array_of_dir","vx","cos","vy","sin","sphere","makeScene","fieldSetup","num_p","Array","random","color","getRandomColor","particle","array_of_boxes","drawImage","filename","loader","load","texture","geometry","material","map","mesh","rotation","PI","undefined","err","console","error","myImg","Image","crossOrigin","onload","canvas","document","createElement","context","getContext","pixelData","src","imgData","data","getImageData","log","makeField","angle","field_lines","cone","wireframe","rotateZ","showField","params","field","remove","createGUI","gui","afterimagePass","uniforms","step","name","onChange","backgroundColor","noise_value","colorsArray","switch_field","perlin","window","innerWidth","innerHeight","fog","z","antialias","shadowMap","enabled","type","appendChild","domElement","addPass","setHex","floor"],"mappings":"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","sourcesContent":["/* eslint-disable no-array-constructor */\nimport{\n    Scene,\n    PerspectiveCamera,\n    Mesh,\n    MeshBasicMaterial,\n    PCFSoftShadowMap,\n    Color,\n    SphereGeometry,\n    ConeGeometry,\n    WebGLRenderer,\n    AmbientLight,\n    PointLight,\n    Fog,\n    Group,\n    TextureLoader,\n    PlaneGeometry\n} from 'three'\n\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js'\nimport GUI from 'lil-gui'; \nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';\nimport { AfterimagePass } from 'three/examples/jsm/postprocessing/AfterimagePass.js';\nimport { ImprovedNoise } from 'three/examples/jsm/math/ImprovedNoise.js';\nimport colors from './colors.js'\n\nclass WebGLApp {\n\n    constructor(parent){\n        \n        //the main function\n\n        this.ready = false\n        // --- V A R S ----\n        this.params = {\n            color: 0xff0000,\n            backgroundColor: 0xe2f0f9,\n            field: true,\n            noise_value: 2\n        }\n        this.colorsArray = colors()\n        this.switch_field = false\n        this.perlin = new ImprovedNoise()\n    \n        // ---- BASIC SCENE SETUP----\n        const aspect = window.innerWidth / window.innerHeight\n        // const clock = new Clock()\n       \n        //scene\n        this.scene = new Scene()\n        //this.scene.background = new Color(this.params.backgroundColor);\n        \n        //add fog for trail fade\n        this.scene.fog = new Fog( 0x000000, 1, 1000 );\n        // fog end\n        \n        //camera setup\n        this.camera = new PerspectiveCamera(75, aspect, 0.1, 1000)\n        this.camera.position.z = -300\n        this.scene.add( this.camera )\n\n        //renderer set up\n        this.renderer = new WebGLRenderer({antialias:true})\n        this.renderer.setSize(window.innerWidth, window.innerHeight)\n        this.renderer.shadowMap.enabled = true;\n        this.renderer.shadowMap.type = PCFSoftShadowMap;\n        parent.appendChild(this.renderer.domElement)\n\n        // postprocessing\n        this.composer = new EffectComposer( this.renderer );\n        this.composer.addPass( new RenderPass( this.scene, this.camera));\n        this.afterimagePass = new AfterimagePass();\n        this.composer.addPass( this.afterimagePass );\n\n        // controls set up\n        this.controls = new OrbitControls( this.camera, this.renderer.domElement );\n       \n        //for cursor interaction\n        // this.cursor = {\n        //         x: 0,\n        //         y: 0\n        // }\n\n        //call init function here\n        this.addLights()\n        this.makeScene()\n        this.animate()\n        this.createGUI()\n\n    }\n\n    getRandomColor(){\n\n        //random color\n        var color = new Color();\n        color.setHex(`0x${this.colorsArray[Math.floor(Math.random() * this.colorsArray.length)]}`);\n        if (color < 500) {\n            color.setHex(500);\n        }\n        return color\n\n    }\n\n    resize = (width, height) => {\n        this.camera.aspect = width / height\n        this.camera.updateProjectionMatrix()\n        this.renderer.setSize(width, height)\n        this.composer.setSize(width, height);\n        \n    }\n\n    addLights= () =>{\n        this.createAmbientLight();\n        this.createPointLight();\n    }\n\n    createAmbientLight = () => {\n        this.ambientLight = new AmbientLight(0x999999, 1);\n        this.scene.add(this.ambientLight);\n    };\n    \n    createPointLight = () => {\n        this.light = new PointLight(0xffffff, 0.3, 0);\n        this.light.castShadow = true;\n        this.light.shadow.mapSize.width = 5000;\n        this.light.shadow.mapSize.height = 5000;\n        this.light.position.set(0,20,-5);\n        this.scene.add(this.light);\n\n        const light = new PointLight(0xffffff, 0.2, 0);\n        light.castShadow = false;\n        light.position.set(0,30,50);\n        this.scene.add(light);\n    };\n\n\n    animate = () => {\n        \n        if (this.particleArr != null && this.ready){\n            for(var i = 0; i < this.particleArr.length ; i++){\n                this.moveParticle(i)\n            }\n        }\n\n        this.composer.render();\n        requestAnimationFrame( this.animate )\n        this.controls.update();\n    }\n\n    moveParticle = (i) => {\n\n        var x = Math.ceil((this.particleArr[i].p.x)/this.res)-1\n        var y = Math.ceil((this.particleArr[i].p.y)/this.res)-1\n        var value = this.array_of_dir[x][y]\n\n        this.particleArr[i].p.vx += Math.cos(value) * -0.01\n        this.particleArr[i].p.vy += Math.sin(value) * 0.01\n\n        this.particleArr[i].p.x +=  this.particleArr[i].p.vx;\n        this.particleArr[i].p.y +=  this.particleArr[i].p.vy;\n\n        // apply some friction so point doesn't speed up too much\n        this.particleArr[i].p.vx *= 0.99;\n        this.particleArr[i].p.vy *= 0.99;\n\n        // wrap around edges of screen - boundaries\n        if(this.particleArr[i].p.x > this.width) this.particleArr[i].p.x = 1;\n        if(this.particleArr[i].p.y > this.height) this.particleArr[i].p.y = 1;\n        if(this.particleArr[i].p.x < 0) this.particleArr[i].p.x = this.width;\n        if(this.particleArr[i].p.y < 0) this.particleArr[i].p.y = this.height;\n\n        this.particleArr[i].sphere.position.set(this.particleArr[i].p.x - this.width/2, this.particleArr[i].p.y - this.height/2)\n\n    }\n    \n\n    makeScene = () => {\n\n        this.fieldSetup();\n    }\n\n    fieldSetup = () => {\n\n        //field setup\n        this.res = 25 // resolution\n        this.width = 450 // flowfield width and height\n        this.height = 450\n        this.num_p = 25 // number of particles\n        \n        //make an array of particles with position and velocity\n        this.particleArr = new Array()\n\n        for (var i = 0; i < this.num_p; i++){\n\n            var p = {\n                x: Math.random() * this.width,\n                y: Math.random() * this.height,\n                vx: 0,\n                vy: 0\n            }\n\n            var color = this.getRandomColor()\n            var sphere  = new Mesh(new SphereGeometry(5, 5, 32), new MeshBasicMaterial( {color: color} ))\n            sphere.position.set(p.x, p.y)\n            this.scene.add(sphere);\n\n            var particle = {\n                p:p, sphere:sphere\n            }\n\n            this.particleArr[i] = particle\n            \n        }\n\n        //making array to store field values\n        this.array_of_boxes = new Array() // helper code to visualize field\n        this.array_of_dir = new Array() // array with all the vectors of the field\n\n        //TO DO: data from perlin\n        // understanding the data\n        // get the debug working\n        // to the image\n\n\n        this.drawImage(\"heart2.jpeg\");\n\n    }\n\n    drawImage = (filename) => {\n\n\t\tconst loader = new TextureLoader();\n        \n\t\tloader.load(\"/assets/textures/\"+filename, ( texture ) => {\n\t\t\t// read texture data\n\t\t\n\t\t\t// const canvas = document.createElement( 'canvas' );\n\t\t\t// canvas.width = this.width;\n\t\t\t// canvas.height = this.height;\n\t\t\t\n\t\t\t// this.context = canvas.getContext( '2d' );\n            // console.log(texture.image)\n\t\t\t// this.context.drawImage( texture.image, 0, 0 );\n\t\t\t\n\t\t\t// const data = this.context.getImageData(368, 368, canvas.width, canvas.height);\n\t\t\t// console.log( data.data[0] );\n\t\t\t\n\t\t\t// visualize the texture\n\t\t\t\n\t\t\tconst geometry = new PlaneGeometry(this.width,this.width);\n\t\t\tconst material = new MeshBasicMaterial( { map: texture } );\n\n\t\t\tconst mesh = new Mesh( geometry, material );\n            mesh.position.set(0,0,10)\n            mesh.rotation.set(Math.PI,0, Math.PI)\n\t\t\tthis.scene.add( mesh );\n\n        }, \n        // onProgress callback currently not supported\n        undefined,\n    \n        // onError callback\n        function ( err ) {\n            console.error( 'An error happened.' );\n        } );\n\n        // read texture data\n        const myImg = new Image();\n        myImg.crossOrigin = \"Anonymous\";\n\n\n        \n        myImg.onload = () => {\n\n            const canvas = document.createElement( 'canvas' );\n            canvas.width = this.width;\n            canvas.height = this.height;\n            const context = canvas.getContext('2d');\n            context.drawImage(myImg, 0, 0);\n            // const data = context.getImageData(368, 368, this.width, this.height);\n            // console.log(data.data)\n            this.pixelData(context);\n\n        }\n\n        myImg.src = \"assets/textures/\"+filename;\n    }\n\n    pixelData = (imgData) => {\n\n        // for (var i = 0; i < imgData.data.length; i += 4) {\n        //     imgData.data[i] = 255-imgData.data[i]; // red\n        //     // imgData.data[i + 1] = 255-imgData.data[i + 1]; //blue\n        //     // imgData.data[i + 2] = 255-imgData.data[i + 2]; //green\n        //     // imgData.data[i + 3] = 255; // alpha\n        //   }\n        this.context = imgData;\n        const data = this.context.getImageData(368, 368, this.width, this.height);\n        console.log(data.data[0])\n\n        var value; // for field\n        for(var x = 0; x < this.width; x+=this.res ){\n            //console.log(x/res)\n            this.array_of_dir[x/this.res] = new Array();\n            this.array_of_boxes[x/this.res] = new Array();\n\n            for(var y = 0; y < this.height; y+=this.res){\n\n                //value = this.perlin.noise( x * 0.65, y * 65, 0.65);\n\n                console.log(\"field\" + this.context.getImageData(x, y, this.width, this.height).data[0])\n                if((this.context.getImageData(x, y, this.width, this.height).data[0]) > 0){\n                    value = 1\n                }else{\n                    value = 0\n                }\n                //this.array_of_dir[x/this.res][y/this.res] = value * this.params.noise_value\n                this.array_of_dir[x/this.res][y/this.res] = value\n\n            }\n        }\n\n        this.makeField();\n    }\n\n    makeField = () => {\n\n        let angle = 0;\n        this.field_lines = new Group();\n       \n        for(var x = 0; x < this.width; x+=this.res ){\n\n            for(var y = 0; y < this.height; y+=this.res){\n                \n                angle = this.array_of_dir[x/this.res][y/this.res]\n                //console.log(\"show field \", angle)\n\n                const geometry = new ConeGeometry( 1, 25, 1 )\n                const cone = new Mesh( geometry, new MeshBasicMaterial( {color: 0xffffff, wireframe:true} )) //white color\n                cone.position.set(x-this.width/2+this.res/2, y-this.height/2+this.res/2, -5)\n                cone.rotateZ(angle)\n                this.field_lines.add(cone)\n\n            }\n        }\n        //field lines needs to be rotated horizontally to go from ' | ' to ' __ '\n       // this.field_lines.rotateZ (Math.PI/2)\n\n        this.showField();\n\n        this.ready = true;\n\n    }\n\n    showField = () => {\n\n        if(this.params.field) this.scene.add(this.field_lines)\n        else this.scene.remove(this.field_lines)\n\n    }\n    \n\n    createGUI = () => {\n\n        const gui = new GUI();\n        gui\n            .add( this.afterimagePass.uniforms[ 'damp' ], 'value', 0, 1 )\n            .step( 0.001 )\n            .name('PostProcessing Damp')\n        gui\n            .add(this.params, \"field\")\n            .onChange(this.showField)\n            .name('Show field')\n        // gui\n        //     .add(this.params, \"noise_value\" , 'value', 0, 5)\n        //     .step( 0.1 )\n        //     .name('Noise value')\n    }\n}\n\nexport default WebGLApp;\n"]},"metadata":{},"sourceType":"module"}